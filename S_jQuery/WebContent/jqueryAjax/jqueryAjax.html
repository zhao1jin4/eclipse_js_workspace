<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
<script type="text/javascript" src="../js/jquery-2.0.3.js"></script>

<script type="text/javascript">
	
	var  root="/J_AjaxServer";
	//var  root="http://127.0.0.1:8080/J_AjaxServer";//是不行的
	//有Ajax操作应和服务器在一个项目
	$(document).ready(function() //<body onload=""
	{
		$("#btn_false").click(function ()
		{
			$("input[name='myButton']").trigger("click");
		
		});

		$("input[name='myButton']").click(function ()
		//$('#btn').click(function ()
		{
			var user=$('#username').val();
			
			$.get( 'hello.jsp?username='+encodeURI(encodeURI(user)),null, 
				function(response)
				{
						$("#result").html(response);
				})
			  	.error(function(e) 
				{
				  	alert(e.statusText); //有错误可能是,js和server不在一个项目的原因
				 })
			  .complete(function() {    });
			
			
			/*
			$.ajax
			({
				//url:root+'/jsp/jquery/hello.jsp?username='+encodeURI(encodeURI(user)),//OK,js端两次encodeURI(encodeURI(user)),tomcat端一次URLDecoder.decode(username,"UTF-8");
				//url:root+'/jsp/jquery/hello.jsp?username='+encodeURIComponent(encodeURIComponent(user)),//OK,js端两次encodeURIComponent
				url:root+'/jsp/jquery/hello.jsp?username='+user ,//OK,js不编码,tomcat 要 new String(username.getBytes("iso8859-1"),"UTF-8");
				data:null, 
				success:function(response)
				{
					$("#result").html(response);
					//$("#result").append(response+'<br>');
				}
			});
			*/
		});
			
			
		$('#list').click(function ()
		{
			
			
			$.getJSON(root+"/listServlet", { one: "一" },
			  function(json) 
			  { 
				$(json).each(function(i)
				{ 
						alert(decodeURI(json[i].username));
						alert(json[i].password); 
				});
			});
			
			
			/*
			$.ajax({
				   type: "POST",
				   url:root+"/listServlet",
				   dataType:"json",
				//   data: "name=John&location=Boston",
				   success: function(json)
				   {
					    $(json).each(function(i)
						{ 
								alert(decodeURI(json[i].username));
								alert(json[i].password); 
						});
				   }
				});
				*/
		});
			
		
		
	    /*//no effect
		 $("p").click(function()
		 {
	         alert( $(this).text() );
	     });
	    $("button").click(function()
		{
	        $("<p>this is second p</p>").appendTo("body");
	    });
		*/
		
		/*
	    $("p").live("click",function(){ //改成live方式,慎用 .live()方法（应该说尽量不要使用）
	         alert( $(this).text() );
	     });
	 	$("button").click(function()
		{
	        $("<p>this is second p</p>").appendTo("body");
	    });
	    */
		//------
		
		 $("p").click(function()
		 {
	         alert( $(this).text() );
	     });
		 
		$("button").click(function()
		{
		    $("<p>this is second p</p>").click(function()
			{  //为新增的元素重新绑定一次
		            alert( $(this).text() );
		    }).appendTo("body");
		});
		//------


	


	
	});
		
	
	</script>
</head>
<body>
	<input type="text" id="username" />
	<input type="button" value="提交"  id="btn" name="myButton" /> 
	<input type="button" value="提交_模拟"  id="btn_false"  /> 
	<div id="result"></div>
	
	<input type="button" value="getListData" id="list"/>
	<div id="tabResult"></div>
  

    <p>click the p have event</p>
	<button>tag button</button>
	
</body>
</html>



