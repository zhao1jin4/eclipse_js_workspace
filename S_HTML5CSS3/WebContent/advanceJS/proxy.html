<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
<script type="text/javascript">  
//https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy
let handler = {
	    get: function(target, name){
	        return name in target ? target[name] : 37;
	    }
	};

	let p = new Proxy({}, handler);

	p.a = 1;
	p.b = undefined;

	console.log(p.a, p.b);    // 1, undefined

	console.log('c' in p, p.c);    // false, 37

	//----
	
	let target = {};
	let p1 = new Proxy(target, {});
	p1.a = 37;   // 操作转发到目标
	console.log(target.a);    // 37. 操作已经被正确地转发
	
	//---
	let validator = {
	  set: function(obj, prop, value) {
	    if (prop === 'age') {
	      if (!Number.isInteger(value)) {
	        throw new TypeError('The age is not an integer');
	      }
	      if (value > 200) {
	        throw new RangeError('The age seems invalid');
	      }
	    }
	
	    // The default behavior to store the value
	    obj[prop] = value;
	  }
	};

	let person = new Proxy({}, validator);
	
	person.age = 100;
	
	console.log(person.age); 
	// 100
	
	//person.age = 'young'; 
	// 抛出异常: Uncaught TypeError: The age is not an integer
	
	//person.age = 300; 
	// 抛出异常: Uncaught RangeError: The age seems invalid
	
	
	//.............
	
	
	
	
	
	
	
	
</script>
</head>
<body > 
</body> 
 
</html>